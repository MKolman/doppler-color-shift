"""
Transformation matrix
X 0.49000  0.31000  0.20000
Y 0.17697  0.81240  0.01063
Z 0.00000  0.01000  0.99000
[X]   | 2.768 1.751 1.130|   [R] 
[Y] = | 1.000 4.590 0.060| * [G] 
[Z]   | 0     0.056 5.594|   [B]


XYZ CMF Values
  700     546     436   
X 0.0114  0.3741  0.3343
Y 0.0041  0.9841  0.0180
Z 0.0000  0.0123  1.6561

CIERGB Primaries
X 0.7347  0.2738 0.1666
Y 0.2653  0.7174 0.0089
Z 0.0000  0.0088 0.8245
"""
import numpy as np

trans_matrix = np.array([
  # [2.768, 1.751, 1.130],
  # [1.000, 4.590, 0.060],
  # [0    , 0.056, 5.594],
  [0.49000,  0.31000,  0.20000],
  [0.17697,  0.81240,  0.01063],
  [0.00000,  0.01000,  0.99000],
])
inv_matrix = np.array([
  [0.41847, -0.15866, -0.082835],
  [-0.091169, 0.25243, 0.015708],
  [0.00092090, -0.0025498, 0.17860],
])
print(inv_matrix.T*2.3697/0.41847)
xyz_cmf = np.array([
  [0.0114,  0.3741,  0.3343],
  [0.0041,  0.9841,  0.0180],
  [0.0000,  0.0123,  1.6561],
])

ciergb_primaries = np.array([
  [0.7347,  0.2738, 0.1666],
  [0.2653,  0.7174, 0.0089],
  [0.0000,  0.0088, 0.8245],
])

mats = [trans_matrix, xyz_cmf, ciergb_primaries]
for m in mats:
  for i in range(3):
    # print(m[0][i]/trans_matrix[0][i], end=",\t")
    print(sum(m[i]))
  print()

K = 0.66679, 1.1324, 1.2008
for i in range(3):
  ciergb_primaries[:, i] *= K[i]
print(ciergb_primaries)

"""
R + G + B = X + Y + Z

1(R) = K1 (0.7347 X + 0.2653 Y + 0.0000 Z)
1(G) = K2 (0.2738 X + 0.7174 Y + 0.0088 Z)
1(B) = K3 (0.1666 X + 0.0089 Y + 0.8245 Z)



SUM(Ki "RGB"[i]X) = SUM(Ki "RGB"[i]Y) = SUM(Ki "RGB"[i]Z) = 1

{0.7347,  0.2738, 0.1666} [K1]  =  [1]
{0.2653,  0.7174, 0.0089} [K2]  =  [1]
{0.0000,  0.0088, 0.8245} [K3]  =  [1]

{{0.7347,  0.2738, 0.1666}, {0.2653,  0.7174, 0.0089}, {0.0000,  0.0088, 0.8245}} X = {1, 1, 1}

K1 = 0.66679
K2 = 1.1324
K3 = 1.2008
"""
